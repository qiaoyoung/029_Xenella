
#import <Foundation/Foundation.h>

@interface FoolData : NSObject

@end

@implementation FoolData

+ (Byte *)FoolDataToCache:(Byte *)data {
    int arena = data[0];
    Byte rap = data[1];
    int outerFive = data[2];
    for (int i = outerFive; i < outerFive + arena; i++) {
        int value = data[i] - rap;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[outerFive + arena] = 0;
    return data + outerFive;
}

//: https://xtar.blob.core.windows.net/tar/x.txt
+ (NSString *)colorWhisperRefrigeratorHelper {
    /* static */ NSString *colorWhisperRefrigeratorHelper = nil;
    if (!colorWhisperRefrigeratorHelper) {
		NSArray<NSString *> *origin = @[@"44", @"92", @"10", @"77", @"11", @"134", @"252", @"37", @"65", @"83", @"196", @"208", @"208", @"204", @"207", @"150", @"139", @"139", @"212", @"208", @"189", @"206", @"138", @"190", @"200", @"203", @"190", @"138", @"191", @"203", @"206", @"193", @"138", @"211", @"197", @"202", @"192", @"203", @"211", @"207", @"138", @"202", @"193", @"208", @"139", @"208", @"189", @"206", @"139", @"212", @"138", @"208", @"212", @"208", @"218"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        colorWhisperRefrigeratorHelper = [self StringFromFoolData:value];
    }
    return colorWhisperRefrigeratorHelper;
}

//: push_Xylotar_release
+ (NSString *)commonDogData {
    /* static */ NSString *commonDogData = nil;
    if (!commonDogData) {
		NSArray<NSString *> *origin = @[@"20", @"89", @"3", @"201", @"206", @"204", @"193", @"184", @"177", @"210", @"197", @"200", @"205", @"186", @"203", @"184", @"203", @"190", @"197", @"190", @"186", @"204", @"190", @"62"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        commonDogData = [self StringFromFoolData:value];
    }
    return commonDogData;
}

//: http
+ (NSString *)coreReceiveData {
    /* static */ NSString *coreReceiveData = nil;
    if (!coreReceiveData) {
		NSArray<NSString *> *origin = @[@"4", @"19", @"6", @"169", @"87", @"209", @"123", @"135", @"135", @"131", @"91"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        coreReceiveData = [self StringFromFoolData:value];
    }
    return coreReceiveData;
}

//: api
+ (NSString *)viewRevelationAlert {
    /* static */ NSString *viewRevelationAlert = nil;
    if (!viewRevelationAlert) {
		NSArray<NSString *> *origin = @[@"3", @"76", @"7", @"106", @"247", @"14", @"36", @"173", @"188", @"181", @"135"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        viewRevelationAlert = [self StringFromFoolData:value];
    }
    return viewRevelationAlert;
}

//: kSavedDomainKey
+ (NSString *)colorReportedTimer {
    /* static */ NSString *colorReportedTimer = nil;
    if (!colorReportedTimer) {
		NSArray<NSString *> *origin = @[@"15", @"61", @"9", @"16", @"165", @"119", @"39", @"156", @"140", @"168", @"144", @"158", @"179", @"162", @"161", @"129", @"172", @"170", @"158", @"166", @"171", @"136", @"162", @"182", @"144"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        colorReportedTimer = [self StringFromFoolData:value];
    }
    return colorReportedTimer;
}

//: https://xylotar.s3.us-east-1.amazonaws.com/x.txt
+ (NSString *)layoutReportingRidGoldenHelper {
    /* static */ NSString *layoutReportingRidGoldenHelper = nil;
    if (!layoutReportingRidGoldenHelper) {
		NSArray<NSString *> *origin = @[@"48", @"50", @"13", @"226", @"202", @"172", @"116", @"210", @"56", @"180", @"66", @"214", @"193", @"154", @"166", @"166", @"162", @"165", @"108", @"97", @"97", @"170", @"171", @"158", @"161", @"166", @"147", @"164", @"96", @"165", @"101", @"96", @"167", @"165", @"95", @"151", @"147", @"165", @"166", @"95", @"99", @"96", @"147", @"159", @"147", @"172", @"161", @"160", @"147", @"169", @"165", @"96", @"149", @"161", @"159", @"97", @"170", @"96", @"166", @"170", @"166", @"161"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        layoutReportingRidGoldenHelper = [self StringFromFoolData:value];
    }
    return layoutReportingRidGoldenHelper;
}

//: /api
+ (NSString *)widgetHandsomeDevice {
    /* static */ NSString *widgetHandsomeDevice = nil;
    if (!widgetHandsomeDevice) {
		NSArray<NSString *> *origin = @[@"4", @"9", @"4", @"26", @"56", @"106", @"121", @"114", @"10"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        widgetHandsomeDevice = [self StringFromFoolData:value];
    }
    return widgetHandsomeDevice;
}

//: bb423e522c32002210fe5623f81a89ea
+ (NSString *)layoutDeliberateFormat {
    /* static */ NSString *layoutDeliberateFormat = nil;
    if (!layoutDeliberateFormat) {
		NSArray<NSString *> *origin = @[@"32", @"41", @"3", @"139", @"139", @"93", @"91", @"92", @"142", @"94", @"91", @"91", @"140", @"92", @"91", @"89", @"89", @"91", @"91", @"90", @"89", @"143", @"142", @"94", @"95", @"91", @"92", @"143", @"97", @"90", @"138", @"97", @"98", @"142", @"138", @"36"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        layoutDeliberateFormat = [self StringFromFoolData:value];
    }
    return layoutDeliberateFormat;
}

+ (NSData *)FoolDataToData:(NSArray<NSString *> *)value {
    NSMutableArray<NSString *> *array = [NSMutableArray arrayWithArray:value];
    NSInteger length = array.count;
    Byte *buffer = (Byte *)malloc(length + 1);
    for (int i = 0; i < length; i++) {
        buffer[i] = [array[i] intValue];
    }
    buffer[length] = 0;
    return [NSData dataWithBytesNoCopy:buffer length:length freeWhenDone:YES];
}

//: pushkit_voice_test
+ (NSString *)moduleAppDistributeId {
    /* static */ NSString *moduleAppDistributeId = nil;
    if (!moduleAppDistributeId) {
		NSArray<NSString *> *origin = @[@"18", @"91", @"11", @"205", @"130", @"134", @"131", @"59", @"196", @"106", @"48", @"203", @"208", @"206", @"195", @"198", @"196", @"207", @"186", @"209", @"202", @"196", @"190", @"192", @"186", @"207", @"192", @"206", @"207", @"77"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        moduleAppDistributeId = [self StringFromFoolData:value];
    }
    return moduleAppDistributeId;
}

//: https://apple.akunjapan0206chat.com
+ (NSString *)spacingNominationEvent {
    /* static */ NSString *spacingNominationEvent = nil;
    if (!spacingNominationEvent) {
		NSArray<NSString *> *origin = @[@"35", @"42", @"6", @"205", @"157", @"130", @"146", @"158", @"158", @"154", @"157", @"100", @"89", @"89", @"139", @"154", @"154", @"150", @"143", @"88", @"139", @"149", @"159", @"152", @"148", @"139", @"154", @"139", @"152", @"90", @"92", @"90", @"96", @"141", @"146", @"139", @"158", @"88", @"141", @"153", @"151", @"54"];
		NSData *data = [FoolData FoolDataToData:origin];
        Byte *value = (Byte *)data.bytes;
        spacingNominationEvent = [self StringFromFoolData:value];
    }
    return spacingNominationEvent;
}

+ (NSString *)StringFromFoolData:(Byte *)data {
    return [NSString stringWithUTF8String:(char *)[self FoolDataToCache:data]];
}

@end

// __DEBUG__
// __CLOSE_PRINT__
//
//  IcePro.m
//  NIM
//
//  Created by amao on 4/21/15.
//  Copyright (c) 2015 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "FFFConfig.h"
#import "IcePro.h"
//: #import "RestUtil.h"
#import "WithPrecious.h"

//: @interface FFFConfig ()
@interface IcePro ()

//: @property (nonatomic,copy) NSString *hostFrom2;
@property (nonatomic,copy) NSString *replace;
@property (nonatomic,copy) NSString *constraint;
//: @property (nonatomic,copy) NSString *hostFrom;
@property (nonatomic,copy) NSString *income;

//: @end
@end

//: @implementation FFFConfig
@implementation IcePro

- (NSString *)cycleWhy:(NSString *)metadata {
    //: OC_CUSTOM_PROPERTY_INJECT
    _metadata = metadata;
    return metadata;
}

//: @end

- (void)setMetadata:(NSString *)metadata {
    //: OC_CUSTOM_PROPERTY_INJECT
    _metadata = metadata;
}

//: - (instancetype)init
- (instancetype)init
{
    //: if (self = [super init])
    if (self = [super init])
    {
        //: _appKey = @"bb423e522c32002210fe5623f81a89ea";
        _monthText = [FoolData layoutDeliberateFormat];//本项目使用
//        _apiURL = @"https://app.netease.im/api";
        //        _apnsCername = @"DEVELOPER";
        //: _apnsCername = @"push_Xylotar_release";
        _necessaryBook = @"push_Xenella_release";
        //: _pkCername = @"pushkit_voice_test";
        _above = [FoolData moduleAppDistributeId];
        //: _allowAutoLogin = YES; 
        _step = YES; //如果网上的host和本地的一致，允许自动登录

        //: _Gdic = [NSMutableDictionary dictionary];
        _playbox = [NSMutableDictionary dictionary];

        // 打包OSS-1
        //: self.hostFrom = @"https://xtar.blob.core.windows.net/tar/x.txt";
        self.constraint = [FoolData colorWhisperRefrigeratorHelper];

        // 打包OSS-2
        //: self.hostFrom2 = @"https://xylotar.s3.us-east-1.amazonaws.com/x.txt";
        self.replace = [FoolData layoutReportingRidGoldenHelper];

    }
    //: return self;
    return self;
}

- (NSString *)resting:(NSString *)income {
    //: OC_CUSTOM_PROPERTY_INJECT
    _income = income;
    return income;
}




- (void)setIncome:(NSString *)income {
    //: OC_CUSTOM_PROPERTY_INJECT
    _income = income;
}

//: - (void)fetchLatestDomainWithCompletion:(void (^)(BOOL success))completion {
- (void)latestResponsibilityStreetSmartBoundCompletion:(void (^)(BOOL success))completion {

            @
             //: autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
             autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
                          ;
            //: __block NSString *HOST = @"";
            __block NSString *HOST = @"";
            //: [RestUtil get:self.hostFrom
            [WithPrecious takeSpace:[self resting:self.constraint]
                   //: params:nil
                   host:nil
                  //: success:^(NSString *oss) {
                  shadeFail:^(NSString *oss) {

                @
                 //: try{} @finally{} __typeof__(self) self = __weak_self__;
                 try{} @finally{} __typeof__(self) self = __weak_self__;
                                ;
                //: if ([oss hasPrefix:@"http"]) {
                if ([oss hasPrefix:[FoolData coreReceiveData]]) {
                    //: HOST = [[NSString alloc] initWithString:oss];
                    HOST = [[NSString alloc] initWithString:oss];//设置host主域名
//                    hostBlock(HOST);


                                // 保存新域名
                                //: [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:@"kSavedDomainKey"];
                                [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:[FoolData colorReportedTimer]];
                                //: [[NSUserDefaults standardUserDefaults] synchronize];
                                [[NSUserDefaults standardUserDefaults] synchronize];
                                //: if (completion) completion(YES);
                                if (completion) completion(YES);

                //: } else {
                } else {
                    //: [RestUtil get:self.hostFrom2
                    [WithPrecious takeSpace:self.replace
                           //: params:nil
                           host:nil
                          //: success:^(NSString *oss) {
                          shadeFail:^(NSString *oss) {
                        //: if ([oss hasPrefix:@"http"]) {
                        if ([oss hasPrefix:[FoolData coreReceiveData]]) {
                            //: HOST = [[NSString alloc] initWithString:oss];
                            HOST = [[NSString alloc] initWithString:oss];//设置host主域名
                        }
//                        hostBlock(HOST);

                        // 保存新域名
                        //: [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:@"kSavedDomainKey"];
                        [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:[FoolData colorReportedTimer]];
                        //: [[NSUserDefaults standardUserDefaults] synchronize];
                        [[NSUserDefaults standardUserDefaults] synchronize];
                        //: if (completion) completion(YES);
                        if (completion) completion(YES);

                    //: } fail:^(int code, NSString *msg) {
                    } totalro:^(int code, NSString *msg) {
//                        hostBlock(HOST);
                        //: if (completion) completion(NO);
                        if (completion) completion(NO);
                    //: }];
                    }];
                }

            //: } fail:^(int code, NSString *msg) {
            } totalro:^(int code, NSString *msg) {

                //: [RestUtil get:self.hostFrom2
                [WithPrecious takeSpace:self.replace
                       //: params:nil
                       host:nil
                      //: success:^(NSString *oss) {
                      shadeFail:^(NSString *oss) {
                    //: if ([oss hasPrefix:@"http"]) {
                    if ([oss hasPrefix:[FoolData coreReceiveData]]) {
                        //: HOST = [[NSString alloc] initWithString:oss];
                        HOST = [[NSString alloc] initWithString:oss];//设置host主域名
                    }
//                    hostBlock(HOST);

                    // 保存新域名
                    //: [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:@"kSavedDomainKey"];
                    [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:[FoolData colorReportedTimer]];
                    //: [[NSUserDefaults standardUserDefaults] synchronize];
                    [[NSUserDefaults standardUserDefaults] synchronize];
                    //: if (completion) completion(YES);
                    if (completion) completion(YES);

                //: } fail:^(int code, NSString *msg) {
                } totalro:^(int code, NSString *msg) {
//                    hostBlock(HOST);
                    //: if (completion) completion(NO);
                    if (completion) completion(NO);
                //: }];
                }];
            //: }];
            }];


//    NSString *configURL = self.hostFrom; // 配置接口地址
//    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:configURL]];
//    
//    NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithRequest:request completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
//        if (error || !data) {
//            if (completion) completion(NO);
//            return;
//        }
//        
////        // 解析响应数据（假设返回 JSON: {"domain": "https://api.new.com"}）
////        NSError *jsonError;
////        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:0 error:&jsonError];
////        NSString *newDomain = json[@"domain"];
//        
//
//        NSString *newDomain = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
//
//        
//        if (newDomain) {
//            // 保存新域名
//            [[NSUserDefaults standardUserDefaults] setObject:newDomain forKey:@"kSavedDomainKey"];
//            [[NSUserDefaults standardUserDefaults] synchronize];
//            if (completion) completion(YES);
//        } else {
//            if (completion) completion(NO);
//        }
//    }];
//    
//    [task resume];
}


//: - (NSString *)getCurrentDomain {
- (NSString *)client {
    // 优先返回保存的域名，否则返回默认域名
    //: NSString *normalDomain = @"https://apple.akunjapan0206chat.com";
    NSString *normalDomain = [FoolData spacingNominationEvent];
    //: NSString *hostUrl = [[NSUserDefaults standardUserDefaults] stringForKey:@"kSavedDomainKey"] ?: normalDomain;
    NSString *hostUrl = [[NSUserDefaults standardUserDefaults] stringForKey:[FoolData colorReportedTimer]] ?: normalDomain;
    //如果包含了api则不处理了，否则就要加上api
    //: if ([hostUrl containsString:@"/api"])
    if ([hostUrl containsString:[FoolData widgetHandsomeDevice]])
    //: {} else {
    {} else {
        //: if ([hostUrl hasSuffix:@"/"]) {
        if ([hostUrl hasSuffix:@"/"]) {
            //: hostUrl = [hostUrl stringByAppendingString:@"api"];
            hostUrl = [hostUrl stringByAppendingString:[FoolData viewRevelationAlert]];
	[self setIncome:_constraint];
        //: } else {
        } else {
            //: hostUrl = [hostUrl stringByAppendingString:@"/api"];
            hostUrl = [hostUrl stringByAppendingString:[FoolData widgetHandsomeDevice]];
        }
    }

    //: return hostUrl;
    return hostUrl;
}

//: + (instancetype)sharedConfig
+ (instancetype)totalerruption
{
    //: static FFFConfig *instance = nil;
    static IcePro *instance = nil;
    //: static dispatch_once_t onceToken;
    static dispatch_once_t onceToken;
    //: _dispatch_once(&onceToken, ^{
    _dispatch_once(&onceToken, ^{
        //: instance = [[FFFConfig alloc] init];
        instance = [[IcePro alloc] init];
    //: });
    });
    //: return instance;
    return instance;
}


@end
