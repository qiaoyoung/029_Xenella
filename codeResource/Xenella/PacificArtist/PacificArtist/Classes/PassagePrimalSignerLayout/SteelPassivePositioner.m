
#import <Foundation/Foundation.h>

NSString *StringFromOldData(Byte *data);        


//: add_friend_activity_add_friend
Byte k_singleTitle[] = {17, 30, 19, 9, 210, 187, 190, 18, 246, 78, 81, 81, 76, 83, 95, 86, 82, 91, 81, 76, 78, 80, 97, 86, 99, 86, 97, 102, 76, 78, 81, 81, 76, 83, 95, 86, 82, 91, 81, 87};

//: friend_info_activity_account
Byte kClusterMostName[] = {20, 28, 50, 14, 87, 216, 65, 212, 210, 149, 89, 170, 154, 76, 52, 64, 55, 51, 60, 50, 45, 55, 60, 52, 61, 45, 47, 49, 66, 55, 68, 55, 66, 71, 45, 47, 49, 49, 61, 67, 60, 66, 211};

//: contact_user_default_header
Byte themeNecessaryPath[] = {78, 27, 5, 5, 22, 94, 106, 105, 111, 92, 94, 111, 90, 112, 110, 96, 109, 90, 95, 96, 97, 92, 112, 103, 111, 90, 99, 96, 92, 95, 96, 109, 15};

//: /user/detail
Byte moduleAllowName[] = {69, 12, 74, 5, 190, 229, 43, 41, 27, 40, 229, 26, 27, 42, 23, 31, 34, 54};

//: user_id
Byte screenReflectSettings[] = {23, 7, 81, 11, 105, 238, 245, 184, 82, 70, 11, 36, 34, 20, 33, 14, 24, 19, 44};

//: data
Byte viewMeasureError[] = {77, 4, 44, 8, 120, 229, 220, 239, 56, 53, 72, 53, 139};

//: request_successful
Byte themeNailFormat[] = {43, 18, 78, 8, 52, 10, 250, 164, 36, 23, 35, 39, 23, 37, 38, 17, 37, 39, 21, 21, 23, 37, 37, 24, 39, 30, 103};

//: add_friend_add_fail
Byte appGroundAlert[] = {3, 19, 33, 10, 149, 132, 234, 163, 51, 216, 64, 67, 67, 62, 69, 81, 72, 68, 77, 67, 62, 64, 67, 67, 62, 69, 64, 72, 75, 109};

//: back_arrow_bl
Byte appAdditionalTimer[] = {24, 13, 22, 6, 245, 86, 76, 75, 77, 85, 73, 75, 92, 92, 89, 97, 73, 76, 86, 6};

//: account
Byte themeCycleAdditionalFormat[] = {80, 7, 73, 9, 213, 5, 82, 172, 226, 24, 26, 26, 38, 44, 37, 43, 108};

//: add_friend_request_fail
Byte kJumpEvent[] = {82, 23, 27, 14, 4, 255, 225, 184, 67, 100, 129, 237, 199, 59, 70, 73, 73, 68, 75, 87, 78, 74, 83, 73, 68, 87, 74, 86, 90, 74, 88, 89, 68, 75, 70, 78, 81, 61};

//: common_bg
Byte commonTalentedAlert[] = {80, 9, 99, 4, 0, 12, 10, 10, 12, 11, 252, 255, 4, 173};

//: contact_tag_fragment_add_success
Byte colorMonitorMessage[] = {13, 32, 61, 8, 167, 182, 100, 176, 38, 50, 49, 55, 36, 38, 55, 34, 55, 36, 42, 34, 41, 53, 36, 42, 48, 40, 49, 55, 34, 36, 39, 39, 34, 54, 56, 38, 38, 40, 54, 54, 45};

//: code
Byte colorHighlightPage[] = {70, 4, 34, 6, 253, 40, 65, 77, 66, 67, 242};

//: #999999
Byte kUsPage[] = {55, 7, 19, 8, 212, 208, 212, 123, 16, 38, 38, 38, 38, 38, 38, 156};

//: #0D81CF
Byte spacingAnotherValue[] = {3, 7, 35, 13, 149, 139, 23, 22, 104, 125, 93, 223, 91, 0, 13, 33, 21, 14, 32, 35, 97};

// __DEBUG__
// __CLOSE_PRINT__
//
//  SteelPassivePositioner.m
//  NIM
//
//  Created by Yan Wang on 2024/7/30.
//  Copyright © 2024 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "SteelPassivePositioner.h"
#import "SteelPassivePositioner.h"
//: #import "UIView+WithoutExpandBeacon.h"
#import "UIView+WithoutExpandBeacon.h"
//: #import "ShapeSurfTerminalSystematic.h"
#import "ShapeSurfTerminalSystematic.h"
//: #import "UIView+Layout.h"
#import "UIView+Layout.h"
//: #import "BoardCozyMask.h"
#import "BoardCozyMask.h"
//: #import "BehindYieldGenericAdaptive.h"
#import "BehindYieldGenericAdaptive.h"
//: #import "UIAlertView+TempleEnableAlign.h"
#import "UIAlertView+TempleEnableAlign.h"
//: #import "TransformReplayCelestial.h"
#import "TransformReplayCelestial.h"
//: #import "FertileSuiteEnableCacheLine.h"
#import "FertileSuiteEnableCacheLine.h"
//: #import "LibraryOutsideLogicDense.h"
#import "LibraryOutsideLogicDense.h"

//: @interface SteelPassivePositioner ()<NIMUserManagerDelegate>
@interface SteelPassivePositioner ()<NIMUserManagerDelegate>


//: @property (nonatomic, strong) UILabel *account;
@property (nonatomic, strong) UILabel *distance;
//: @property (nonatomic, strong) UIView *userView;
@property (nonatomic, strong) UIView *caliberAssign;

//: @property (nonatomic, strong) UILabel *accountNickname;
@property (nonatomic, strong) UILabel *transmissionNickname;
//: @property (nonatomic,strong) NIMUser *user;
@property (nonatomic,strong) NIMUser *album;
//: @property (nonatomic, strong) UILabel *accountId;
@property (nonatomic, strong) UILabel *methodLabel;
//: @property (nonatomic, strong) UIImageView *accountheadImg;
@property (nonatomic, strong) UIImageView *telecastingImageView;
//: @property (nonatomic,copy ) NSString *userId;
@property (nonatomic,copy ) NSString *modelDisked;
//: @property (nonatomic, strong) UIButton *closeBtn;
@property (nonatomic, strong) UIButton *surface;

//: @property (nonatomic, strong) UIView *personView;
@property (nonatomic, strong) UIView *dragView;

//: @end
@end

//: @implementation SteelPassivePositioner
@implementation SteelPassivePositioner

//: #pragma mark - MDelegate
#pragma mark - MDelegate
//: -(void)sendAddFriendRequest{
-(void)masterSession{
    //: NSString *tempVerificationInfo = [FinishMoveRepaintFrame standardUserDefaults].tempVerificationInfo;
    NSString *tempVerificationInfo = [FinishMoveRepaintFrame styleDefaults].details;
    //: NIMUserRequest *request = [[NIMUserRequest alloc] init];
    NIMUserRequest *request = [[NIMUserRequest alloc] init];
    //: request.userId = self.userId;
    request.userId = self.modelDisked;
    //: request.operation = NIMUserOperationAdd;
    request.operation = NIMUserOperationAdd;
    //: request.operation = NIMUserOperationRequest;
    request.operation = NIMUserOperationRequest;
    //: request.message = tempVerificationInfo.length > 0 ? tempVerificationInfo : @"";
    request.message = tempVerificationInfo.length > 0 ? tempVerificationInfo : @"";

    //: NSString *contact_tag_fragment_add_success = [MatureDismissLotusComposite getTextWithKey:@"contact_tag_fragment_add_success"];
    NSString *contact_tag_fragment_add_success = [MatureDismissLotusComposite remove:StringFromOldData(colorMonitorMessage)];//@"添加成功".user_localized
    //: NSString *request_successful = [MatureDismissLotusComposite getTextWithKey:@"request_successful"];
    NSString *request_successful = [MatureDismissLotusComposite remove:StringFromOldData(themeNailFormat)];//@"请求成功".user_localized
    //: NSString *add_friend_add_fail = [MatureDismissLotusComposite getTextWithKey:@"add_friend_add_fail"];
    NSString *add_friend_add_fail = [MatureDismissLotusComposite remove:StringFromOldData(appGroundAlert)];//@"添加失败".user_localized
    //: NSString *add_friend_request_fail = [MatureDismissLotusComposite getTextWithKey:@"add_friend_request_fail"];
    NSString *add_friend_request_fail = [MatureDismissLotusComposite remove:StringFromOldData(kJumpEvent)];//@"请求失败".user_localized
    //: NSString *successText = request.operation == NIMUserOperationAdd ? contact_tag_fragment_add_success: request_successful;
    NSString *successText = request.operation == NIMUserOperationAdd ? contact_tag_fragment_add_success: request_successful;
    //: NSString *failedText = request.operation == NIMUserOperationAdd ? add_friend_add_fail : add_friend_request_fail;
    NSString *failedText = request.operation == NIMUserOperationAdd ? add_friend_add_fail : add_friend_request_fail;

    //: __weak typeof(self) wself = self;
    __weak typeof(self) wself = self;
    //: [ShapeSurfTerminalSystematic show];
    [ShapeSurfTerminalSystematic comeBrilliant];
    //: [[NIMSDK sharedSDK].userManager requestFriend:request completion:^(NSError *error) {
    [[NIMSDK sharedSDK].userManager requestFriend:request completion:^(NSError *error) {
        //: [ShapeSurfTerminalSystematic dismiss];
        [ShapeSurfTerminalSystematic clueExtent];
        //: if (!error) {
        if (!error) {
            //: [wself.view makeToast:successText
            [wself.view doPosition:successText
                         //: duration:2.0f
                         process:2.0f
                         //: position:CSToastPositionCenter];
                         toastCircuit:coreTipTimer];

        //: }else{
        }else{
            //: [wself.view makeToast:failedText
            [wself.view doPosition:failedText
                         //: duration:2.0f
                         process:2.0f
                         //: position:CSToastPositionCenter];
                         toastCircuit:coreTipTimer];
        }
    //: }];
    }];
}

//: - (void)backAction{
- (void)minLink{
    //: [self.navigationController popViewControllerAnimated:NO];
    [self.navigationController popViewControllerAnimated:NO];
}

//: - (void)viewWillDisappear:(BOOL)animated{
- (void)viewWillDisappear:(BOOL)animated{
    //: [super viewWillDisappear:animated];
    [super viewWillDisappear:animated];
    //: [self.navigationController.navigationBar setHidden:NO];
    [self.navigationController.navigationBar setHidden:NO];
}

//: - (instancetype)initWithUserId:(NSString *)userId{
- (instancetype)initWithRight:(NSString *)userId{
    //: self = [super initWithNibName:nil bundle:nil];
    self = [super initWithNibName:nil bundle:nil];
    //: if (self) {
    if (self) {
        //: _userId = userId;
        _modelDisked = userId;
    }
    //: return self;
    return self;
}
//: - (void)viewWillAppear:(BOOL)animated{
- (void)viewWillAppear:(BOOL)animated{
    //: [super viewWillAppear:animated];
    [super viewWillAppear:animated];
    //: [self.navigationController.navigationBar setHidden:YES];
    [self.navigationController.navigationBar setHidden:YES];
}

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];

    //: UIImageView *bg = [[UIImageView alloc]initWithFrame:self.view.bounds];
    UIImageView *bg = [[UIImageView alloc]initWithFrame:self.view.bounds];
    //: bg.image = [UIImage imageNamed:@"common_bg"];
    bg.image = [UIImage imageNamed:StringFromOldData(commonTalentedAlert)];
    //: [self.view addSubview:bg];
    [self.view addSubview:bg];

    //: self.closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    self.surface = [UIButton buttonWithType:UIButtonTypeCustom];
    //: self.closeBtn.backgroundColor = [UIColor clearColor];
    self.surface.backgroundColor = [UIColor clearColor];
    //: [self.closeBtn setImage:[UIImage imageNamed:@"back_arrow_bl"] forState:(UIControlStateNormal)];
    [self.surface setImage:[UIImage imageNamed:StringFromOldData(appAdditionalTimer)] forState:(UIControlStateNormal)];
    //: [self.closeBtn addTarget:self action:@selector(backAction) forControlEvents:UIControlEventTouchUpInside];
    [self.surface addTarget:self action:@selector(minLink) forControlEvents:UIControlEventTouchUpInside];
    //: [self.view addSubview:self.closeBtn];
    [self.view addSubview:self.surface];
    //: self.closeBtn.frame = CGRectMake(15, 4+[UIDevice vg_statusBarHeight], 36, 36);
    self.surface.frame = CGRectMake(15, 4+[UIDevice barrelhouse], 36, 36);

//    self.user = [[NIMSDK sharedSDK].userManager userInfo:self.userId];

    //: self.accountheadImg = [[UIImageView alloc] initWithFrame:CGRectMake(([[UIScreen mainScreen] bounds].size.width-120)/2, (44.0f + [UIDevice vg_statusBarHeight])+30, 120, 120)];
    self.telecastingImageView = [[UIImageView alloc] initWithFrame:CGRectMake(([[UIScreen mainScreen] bounds].size.width-120)/2, (44.0f + [UIDevice barrelhouse])+30, 120, 120)];
    //: self.accountheadImg.layer.cornerRadius = 60;
    self.telecastingImageView.layer.cornerRadius = 60;
    //: self.accountheadImg.layer.masksToBounds = YES;
    self.telecastingImageView.layer.masksToBounds = YES;
    //: [self.view addSubview:self.accountheadImg];
    [self.view addSubview:self.telecastingImageView];

    //: self.accountNickname = [[UILabel alloc] initWithFrame:CGRectMake(15, self.accountheadImg.bottom+30, [[UIScreen mainScreen] bounds].size.width-30, 20)];
    self.transmissionNickname = [[UILabel alloc] initWithFrame:CGRectMake(15, self.telecastingImageView.secondStandardFloat+30, [[UIScreen mainScreen] bounds].size.width-30, 20)];
    //: self.accountNickname.font = [UIFont boldSystemFontOfSize:18];
    self.transmissionNickname.font = [UIFont boldSystemFontOfSize:18];
    //: self.accountNickname.textColor = [UIColor blackColor];
    self.transmissionNickname.textColor = [UIColor blackColor];
    //: self.accountNickname.textAlignment = NSTextAlignmentCenter;
    self.transmissionNickname.textAlignment = NSTextAlignmentCenter;
    //: [self.view addSubview:self.accountNickname];
    [self.view addSubview:self.transmissionNickname];

    //: self.account = [[UILabel alloc] initWithFrame:CGRectMake(15, self.accountNickname.bottom+10, [[UIScreen mainScreen] bounds].size.width-30, 15)];
    self.distance = [[UILabel alloc] initWithFrame:CGRectMake(15, self.transmissionNickname.secondStandardFloat+10, [[UIScreen mainScreen] bounds].size.width-30, 15)];
    //: self.account.font = [UIFont systemFontOfSize:12];
    self.distance.font = [UIFont systemFontOfSize:12];
    //: self.account.textColor = [UIColor colorWithHexString:@"#999999"];
    self.distance.textColor = [UIColor factory:StringFromOldData(kUsPage)];
    //: self.account.textAlignment = NSTextAlignmentCenter;
    self.distance.textAlignment = NSTextAlignmentCenter;
    //: [self.view addSubview:self.account];
    [self.view addSubview:self.distance];


    //: UIButton *addBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    UIButton *addBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    //: addBtn.frame = CGRectMake(15, self.account.bottom+30, [[UIScreen mainScreen] bounds].size.width-30, 44);
    addBtn.frame = CGRectMake(15, self.distance.secondStandardFloat+30, [[UIScreen mainScreen] bounds].size.width-30, 44);
    //: [addBtn addTarget:self action:@selector(sendAddFriendRequest) forControlEvents:UIControlEventTouchUpInside];
    [addBtn addTarget:self action:@selector(masterSession) forControlEvents:UIControlEventTouchUpInside];
    //: addBtn.titleLabel.font = [UIFont systemFontOfSize:16];
    addBtn.titleLabel.font = [UIFont systemFontOfSize:16];
    //: [addBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [addBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    //: [addBtn setTitle:[MatureDismissLotusComposite getTextWithKey:@"add_friend_activity_add_friend"] forState:UIControlStateNormal];
    [addBtn setTitle:[MatureDismissLotusComposite remove:StringFromOldData(k_singleTitle)] forState:UIControlStateNormal];
    //: addBtn.backgroundColor = [UIColor colorWithHexString:@"#0D81CF"];
    addBtn.backgroundColor = [UIColor factory:StringFromOldData(spacingAnotherValue)];
    //: addBtn.layer.cornerRadius = 22;
    addBtn.layer.cornerRadius = 22;
    //: [self.view addSubview:addBtn];
    [self.view addSubview:addBtn];


    @
     //: autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
     autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
    //: [[NIMSDK sharedSDK].userManager fetchUserInfos:@[self.userId] completion:^(NSArray<NIMUser *> * _Nullable users, NSError * _Nullable error) {
    [[NIMSDK sharedSDK].userManager fetchUserInfos:@[self.modelDisked] completion:^(NSArray<NIMUser *> * _Nullable users, NSError * _Nullable error) {
            //: if (users.count) {
            if (users.count) {
                @
                 //: try{} @finally{} __typeof__(self) self = __weak_self__;
                 try{} @finally{} __typeof__(self) self = __weak_self__;
                                ;
                //: self.user = users.firstObject;
                self.album = users.firstObject;

                //: [self.accountheadImg sd_setImageWithURL:[NSURL URLWithString:self.user.userInfo.avatarUrl] placeholderImage:[UIImage imageNamed:@"contact_user_default_header"]];
                [self.telecastingImageView sd_setImageWithURL:[NSURL URLWithString:self.album.userInfo.avatarUrl] placeholderImage:[UIImage imageNamed:StringFromOldData(themeNecessaryPath)]];
                //: self.accountNickname.text = self.user.userInfo.nickName;
                self.transmissionNickname.text = self.album.userInfo.nickName;
            }
        //: }];
        }];


    //: NSMutableDictionary *dict = @{}.mutableCopy;
    NSMutableDictionary *dict = @{}.mutableCopy;
    //: dict[@"user_id"] = self.userId;
    dict[StringFromOldData(screenReflectSettings)] = self.modelDisked;
    //: [FertileSuiteEnableCacheLine getWithUrl:[NSString stringWithFormat:@"/user/detail"] params:dict isShow:NO success:^(id responseObject) {
    [FertileSuiteEnableCacheLine exhibit:[NSString stringWithFormat:StringFromOldData(moduleAllowName)] bring:dict params:NO deepFailed:^(id responseObject) {
        //: NSDictionary *resultDict = (NSDictionary *)responseObject;
        NSDictionary *resultDict = (NSDictionary *)responseObject;
        //: NSString *code = [resultDict newStringValueForKey:@"code"];
        NSString *code = [resultDict clueKey:StringFromOldData(colorHighlightPage)];
        //: if (code.integerValue <= 0) {
        if (code.integerValue <= 0) {
            //: NSDictionary *data = [resultDict valueObjectForKey:@"data"];
            NSDictionary *data = [resultDict domeCloseHold:StringFromOldData(viewMeasureError)];
            //: NSString *account = [data newStringValueForKey:@"account"];
            NSString *account = [data clueKey:StringFromOldData(themeCycleAdditionalFormat)];
            //: self.account.text = [NSString stringWithFormat:@"%@%@",[MatureDismissLotusComposite getTextWithKey:@"friend_info_activity_account"], account];
            self.distance.text = [NSString stringWithFormat:@"%@%@",[MatureDismissLotusComposite remove:StringFromOldData(kClusterMostName)], account];
        }

    //: } failed:^(id responseObject, NSError *error) {
    } coordinator:^(id responseObject, NSError *error) {

    //: }];
    }];

}

//: - (void)dealloc{
- (void)dealloc{

}

//: @end
@end

Byte * OldDataToCache(Byte *data) {
    int methodOld = data[0];
    int indoors = data[1];
    Byte now = data[2];
    int cycleJump = data[3];
    if (!methodOld) return data + cycleJump;
    for (int i = cycleJump; i < cycleJump + indoors; i++) {
        int value = data[i] + now;
        if (value > 255) {
            value -= 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[cycleJump + indoors] = 0;
    return data + cycleJump;
}

NSString *StringFromOldData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)OldDataToCache(data)];
}
