
#import <Foundation/Foundation.h>
typedef struct {
    Byte orientation;
    Byte *gladSpecialist;
    unsigned int inunction;
    Byte drawingPretend;
	int grape;
	int disability;
} DisabilityData;

NSString *StringFromDisabilityData(DisabilityData *data);


//: message
DisabilityData appSplayUtility = (DisabilityData){18, (Byte []){127, 119, 97, 97, 115, 117, 119, 6}, 7, 237, 236, 103};

//: sender
DisabilityData kDirectPlatform = (DisabilityData){13, (Byte []){126, 104, 99, 105, 104, 127, 29}, 6, 197, 29, 189};

//: null
DisabilityData moduleEqualRantPreference = (DisabilityData){218, (Byte []){180, 175, 182, 182, 32}, 4, 191, 97, 93};

//: 聊天记录
DisabilityData componentRoutName = (DisabilityData){53, (Byte []){221, 180, 191, 208, 145, 156, 221, 155, 133, 208, 136, 160, 145}, 12, 157, 193, 70};

//: encrypted
DisabilityData coreSlideName = (DisabilityData){39, (Byte []){66, 73, 68, 85, 94, 87, 83, 66, 67, 207}, 9, 232, 232, 36};

//: messageAbstract
DisabilityData componentCartPlatform = (DisabilityData){141, (Byte []){224, 232, 254, 254, 236, 234, 232, 204, 239, 254, 249, 255, 236, 238, 249, 188}, 15, 200, 101, 31};

//: sessionName
DisabilityData corePepperSurfData = (DisabilityData){31, (Byte []){108, 122, 108, 108, 118, 112, 113, 81, 126, 114, 122, 98}, 11, 232, 91, 211};

//: data
DisabilityData layoutOrientTableDimensionPreference = (DisabilityData){30, (Byte []){122, 127, 106, 127, 233}, 4, 245, 136, 217};

//: fileName
DisabilityData themeProvideFormat = (DisabilityData){218, (Byte []){188, 179, 182, 191, 148, 187, 183, 191, 21}, 8, 171, 112, 209};

//: compressed
DisabilityData coreOutlineFormat = (DisabilityData){80, (Byte []){51, 63, 61, 32, 34, 53, 35, 35, 53, 52, 106}, 10, 250, 37, 135};

//: md5
DisabilityData colorLiverAlert = (DisabilityData){169, (Byte []){196, 205, 156, 161}, 3, 226, 242, 240};

//: sessionId
DisabilityData coreBillWaveOverwhelmingText = (DisabilityData){21, (Byte []){102, 112, 102, 102, 124, 122, 123, 92, 113, 33}, 9, 162, 87, 162};

//: type
DisabilityData viewLiverPage = (DisabilityData){242, (Byte []){134, 139, 130, 151, 167}, 4, 179, 119, 65};

//: url
DisabilityData spacingCoolErrLiverFormat = (DisabilityData){41, (Byte []){92, 91, 69, 85}, 3, 189, 93, 130};

//: password
DisabilityData commonSlopeError = (DisabilityData){54, (Byte []){70, 87, 69, 69, 65, 89, 68, 82, 184}, 8, 243, 23, 243};

// __DEBUG__
// __CLOSE_PRINT__
//
//  MirrorAccountContextCross.m
//  NIM
//
//  Created by Netease on 2019/10/16.
//  Copyright © 2019 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "MirrorAccountContextCross.h"
#import "MirrorAccountContextCross.h"
//: #import "BirchRavenFrugalHold.h"
#import "BirchRavenFrugalHold.h"
//: #import "DelegateMountainAuthenticGatewayEnd.h"
#import "DelegateMountainAuthenticGatewayEnd.h"
//: #import "NSDictionary+FacadeDirectoryRouterMediator.h"
#import "NSDictionary+FacadeDirectoryRouterMediator.h"
//: #import "FlameEnrichGorgeWarm+ParseByBreakPerform.h"
#import "FlameEnrichGorgeWarm+ParseByBreakPerform.h"
//: #import "AbsoluteFastParameterAccount.h"
#import "AbsoluteFastParameterAccount.h"
//: #import "FixDramaticSlipSlope.h"
#import "FixDramaticSlipSlope.h"

//: @interface MirrorAccountContextCross ()
@interface MirrorAccountContextCross ()

//: @property (nonatomic,weak) NIMMessage *message;
@property (nonatomic,weak) NIMMessage *trust;
//: @property (nonatomic,strong) FlameEnrichGorgeWarm *label;
@property (nonatomic,strong) FlameEnrichGorgeWarm *randomGorgeWarm;

//: @end
@end

//: @implementation MirrorAccountContextCross
@implementation MirrorAccountContextCross

//: - (CGSize)contentSize:(NIMMessage *)message cellWidth:(CGFloat)width {
- (CGSize)compartment:(NIMMessage *)message space:(CGFloat)width {
    //: CGFloat msgBubbleMaxWidth = (width - 130);
    CGFloat msgBubbleMaxWidth = (width - 130);
    //: CGFloat padding = 4.0;
    CGFloat padding = 4.0;
    //: CGFloat msgContentMaxWidth = (msgBubbleMaxWidth - 2 * padding);
    CGFloat msgContentMaxWidth = (msgBubbleMaxWidth - 2 * padding);
    //: NSString *titleString = [self formatTitleMessage];
    NSString *titleString = [self title];
    //: NSDictionary *attribute = @{NSFontAttributeName:[UIFont systemFontOfSize:14]};
    NSDictionary *attribute = @{NSFontAttributeName:[UIFont systemFontOfSize:14]};
    //: CGSize bounding = CGSizeMake(msgContentMaxWidth, 1.7976931348623157e+308);
    CGSize bounding = CGSizeMake(msgContentMaxWidth, 1.7976931348623157e+308);
    //: NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading;
    NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading;
    //: CGSize titleSize = [titleString boundingRectWithSize:bounding
    CGSize titleSize = [titleString boundingRectWithSize:bounding
                                                 //: options:options
                                                 options:options
                                              //: attributes:attribute
                                              attributes:attribute
                                                 //: context:nil].size;
                                                 context:nil].size;

    //: attribute = @{NSFontAttributeName:[UIFont systemFontOfSize:11]};
    attribute = @{NSFontAttributeName:[UIFont systemFontOfSize:11]};
	[self setExtent:_flame];
    //: CGSize subTitleSize = [@"聊天记录".user_localized boundingRectWithSize:bounding
    CGSize subTitleSize = [StringFromDisabilityData(&componentRoutName).extended boundingRectWithSize:bounding
                                                               //: options:options
                                                               options:options
                                                            //: attributes:attribute
                                                            attributes:attribute
                                                               //: context:nil].size;
                                                               context:nil].size;


    //: CGFloat abstractHeight = 0;
    CGFloat abstractHeight = 0;
    //: for (WriteBeneathPainter *abs in _abstracts) {
    for (WriteBeneathPainter *abs in _randomOver) {
        //: [self.label nim_setText:[self formatAbstractMessage:abs]];
        [self.randomGorgeWarm waste:[self conference:abs]];
        //: CGSize size = [self.label sizeThatFits:CGSizeMake(msgContentMaxWidth, 1.7976931348623157e+308)];
        CGSize size = [self.randomGorgeWarm sizeThatFits:CGSizeMake(msgContentMaxWidth, 1.7976931348623157e+308)];
        //: abstractHeight += (size.height + padding);
        abstractHeight += (size.height + padding);
    }

    //: CGFloat height = titleSize.height +
    CGFloat height = titleSize.height +
                    //: abstractHeight + 1.0 +
                    abstractHeight + 1.0 +
                    //: padding + subTitleSize.height;
                    padding + subTitleSize.height;

    //: return CGSizeMake(msgBubbleMaxWidth, height);
    return CGSizeMake(msgBubbleMaxWidth, height);
}

//: - (NSString *)formatAbstractMessage:(WriteBeneathPainter *)abstract {
- (NSString *)conference:(WriteBeneathPainter *)abstract {
    //: return [NSString stringWithFormat:@"%@:%@", abstract.sender, abstract.message];
    return [NSString stringWithFormat:@"%@:%@", abstract.rootEnter, abstract.writingStand];
}

//: #pragma mark - 上传接口
#pragma mark - 上传接口
//: - (BOOL)attachmentNeedsUpload {
- (BOOL)attachmentNeedsUpload {
    //: return [_url length] == 0;
    return [_rearElementPercentage length] == 0;
}

//: - (UIEdgeInsets)contentViewInsets:(NIMMessage *)message {
- (UIEdgeInsets)visualPercept:(NIMMessage *)message {
    //: return UIEdgeInsetsMake(12.0, 12.0, 12.0, 4.0);
    return UIEdgeInsetsMake(12.0, 12.0, 12.0, 4.0);
}

//: @end

- (void)setExtent:(NSString *)extent {
    //: OC_CUSTOM_PROPERTY_INJECT
    _extent = extent;
}

//: - (BOOL)canBeForwarded {
- (BOOL)videoForwarded {
    //: return YES;
    return YES;
}

//: - (NSString *)encodeAttachment {
- (NSString *)encodeAttachment {

    //: NSMutableDictionary *dataDic = [NSMutableDictionary dictionary];
    NSMutableDictionary *dataDic = [NSMutableDictionary dictionary];
    //: dataDic[@"url"] = _url;
    dataDic[StringFromDisabilityData(&spacingCoolErrLiverFormat)] = _rearElementPercentage;
    //: dataDic[@"md5"] = _md5;
    dataDic[StringFromDisabilityData(&colorLiverAlert)] = [self fresh:_flame];
    //: dataDic[@"fileName"] = _fileName;
    dataDic[StringFromDisabilityData(&themeProvideFormat)] = _phone;
    //: dataDic[@"compressed"] = @(_compressed);
    dataDic[StringFromDisabilityData(&coreOutlineFormat)] = @(_send);
    //: dataDic[@"encrypted"] = @(_encrypted);
    dataDic[StringFromDisabilityData(&coreSlideName)] = @(_springInsert);
    //: dataDic[@"password"] = _password;
    dataDic[StringFromDisabilityData(&commonSlopeError)] = _mirror;
    //: dataDic[@"messageAbstract"] = _messageAbstract;
    dataDic[StringFromDisabilityData(&componentCartPlatform)] = _host;
    //: dataDic[@"sessionName"] = _sessionName;
    dataDic[StringFromDisabilityData(&corePepperSurfData)] = _line;
    //: dataDic[@"sessionId"] = _sessionId;
    dataDic[StringFromDisabilityData(&coreBillWaveOverwhelmingText)] = _dealText;
    //: NSDictionary *dict = @{@"type" : @(ReadCreatorGladeOwnerTypeMultiRetweet),
    NSDictionary *dict = @{StringFromDisabilityData(&viewLiverPage) : @(ReadCreatorGladeOwnerTypeMultiRetweet),
                           //: @"data" : dataDic};
                           StringFromDisabilityData(&layoutOrientTableDimensionPreference) : dataDic};
    //: NSData *data = [NSJSONSerialization dataWithJSONObject:dict
    NSData *data = [NSJSONSerialization dataWithJSONObject:dict
                                                   //: options:0
                                                   options:0
                                                     //: error:nil];
                                                     error:nil];
    //: NSString *content = @"";
    NSString *content = @"";
    //: if (data) {
    if (data) {
        //: content = [[NSString alloc] initWithData:data
        content = [[NSString alloc] initWithData:data
                                        //: encoding:NSUTF8StringEncoding];
                                        encoding:NSUTF8StringEncoding];
    }


    //: return content;
    return content;
}

//: - (void)setAbstracts:(NSMutableArray<WriteBeneathPainter *> *)abstracts {
- (void)setRandomOver:(NSMutableArray<WriteBeneathPainter *> *)abstracts {
    //: _abstracts = abstracts;
    _randomOver = abstracts;
	[self setExtent:_flame];
    //: NSMutableArray *abstractDics = [NSMutableArray array];
    NSMutableArray *abstractDics = [NSMutableArray array];
    //: for (WriteBeneathPainter *obj in abstracts) {
    for (WriteBeneathPainter *obj in abstracts) {
        //: NSDictionary *objDic = [obj abstractDictionary];
        NSDictionary *objDic = [obj assemble];
        //: if (objDic) {
        if (objDic) {
            //: [abstractDics addObject:objDic];
            [abstractDics addObject:objDic];
        }
    }
    //: _messageAbstract = abstractDics;
    _host = abstractDics;
}

//: #pragma mark - 下载相关接口
#pragma mark - 下载相关接口
//: - (BOOL)attachmentNeedsDownload {
- (BOOL)attachmentNeedsDownload {
    //: NSFileManager *fm = [NSFileManager defaultManager];
    NSFileManager *fm = [NSFileManager defaultManager];
    //: BOOL isDir = NO;
    BOOL isDir = NO;
    //: BOOL fileExist = ([fm fileExistsAtPath:self.filePath isDirectory:&isDir]
    BOOL fileExist = ([fm fileExistsAtPath:self.sunna isDirectory:&isDir]
                      //: && !isDir);
                      && !isDir);
    //: return !fileExist;
    return !fileExist;
}

//: - (void)setMessageAbstract:(NSArray *)messageAbstract {
- (void)setHost:(NSArray *)messageAbstract {
    //: _messageAbstract = messageAbstract;
    _host = messageAbstract;
    //: if (!messageAbstract) {
    if (!messageAbstract) {
        //: _abstracts = nil;
        _randomOver = nil;
	[self setExtent:_flame];
    //: } else {
    } else {
        //: _abstracts = [NSMutableArray array];
        _randomOver = [NSMutableArray array];
	[self setExtent:_flame];
        //: for (id obj in messageAbstract) {
        for (id obj in messageAbstract) {
            //: if ([obj isKindOfClass:[NSDictionary class]]) {
            if ([obj isKindOfClass:[NSDictionary class]]) {
                //: WriteBeneathPainter *abstract = [WriteBeneathPainter abstractWithDictionary:obj];
                WriteBeneathPainter *abstract = [WriteBeneathPainter dictionaryReceiver:obj];
                //: if (abstract) {
                if (abstract) {
                    //: [_abstracts addObject:abstract];
                    [_randomOver addObject:abstract];
                }
            }
        }
    }
}

//: - (FlameEnrichGorgeWarm *)label {
- (FlameEnrichGorgeWarm *)randomGorgeWarm {
    //: if (!_label) {
    if (!_randomGorgeWarm) {
        //: _label = [[FlameEnrichGorgeWarm alloc] initWithFrame:CGRectZero];
        _randomGorgeWarm = [[FlameEnrichGorgeWarm alloc] initWithFrame:CGRectZero];
	[self setExtent:_flame];
        //: _label.textColor = [UIColor lightGrayColor];
        _randomGorgeWarm.textColor = [UIColor lightGrayColor];
	[self setExtent:_flame];
        //: _label.font = [UIFont systemFontOfSize:11];
        _randomGorgeWarm.font = [UIFont systemFontOfSize:11];
        //: _label.numberOfLines = 1;
        _randomGorgeWarm.wealthy = 1;
    }
    //: return _label;
    return _randomGorgeWarm;
}

//: - (NSString *)formatTitleMessage {
- (NSString *)title {
    //: return [NSString stringWithFormat:@"%@%@",
    return [NSString stringWithFormat:@"%@%@",
            //: _sessionName,
            _line,
            //: @"聊天记录".user_localized];
            StringFromDisabilityData(&componentRoutName).extended];
}

//: - (NSString *)attachmentPathForUploading {
- (NSString *)attachmentPathForUploading {
    //: return self.filePath;
    return self.sunna;
}

//: - (BOOL)canBeRevoked {
- (BOOL)admin {
    //: return YES;
    return YES;
}

//: #pragma mark - cell相关
#pragma mark - cell相关
//: - (NSString *)cellContent:(NIMMessage *)message {
- (NSString *)collection:(NIMMessage *)message {
    //: return @"PipelineLeafChordCompressCalm";
    return @"PipelineLeafChordCompressCalm";
}

//: - (NSString *)attachmentURLStringForDownloading {
- (NSString *)attachmentURLStringForDownloading {
    //: return _url;
    return _rearElementPercentage;
}

//: - (NSString *)filePath
- (NSString *)sunna
{
    //: NSString *filePath = self.fileName ? [BirchRavenFrugalHold filepathForMergeForwardFile:self.fileName] : nil;
    NSString *filePath = self.phone ? [BirchRavenFrugalHold movie:self.phone] : nil;
    //: return filePath;
    return filePath;
}

//: - (NSString *)fileName
- (NSString *)phone
{
    //: if (!_fileName) {
    if (!_phone) {
        //: _fileName = self.url.lastPathComponent;
        _phone = self.rearElementPercentage.lastPathComponent;
	[self setExtent:_flame];
    }
    //: return _fileName;
    return _phone;
}

//: - (void)updateAttachmentURL:(NSString *)urlString {
- (void)updateAttachmentURL:(NSString *)urlString {
    //: self.url = urlString;
    self.rearElementPercentage = urlString;
	[self setExtent:_flame];
}

- (NSString *)fresh:(NSString *)extent {
    //: OC_CUSTOM_PROPERTY_INJECT
    _extent = extent;
    return extent;
}

//: - (NSString *)attachmentPathForDownloading {
- (NSString *)attachmentPathForDownloading {
    //: return self.filePath;
    return self.sunna;
}


@end

//: #pragma mark - WriteBeneathPainter
#pragma mark - WriteBeneathPainter


//: @implementation WriteBeneathPainter
@implementation WriteBeneathPainter

//: - (NSDictionary *)abstractDictionary {
- (NSDictionary *)assemble {
    //: if (_sender && _message) {
    if (_rootEnter && _writingStand) {
        //: NSMutableDictionary *dic = [NSMutableDictionary dictionary];
        NSMutableDictionary *dic = [NSMutableDictionary dictionary];
        //: dic[@"sender"] = _sender;
        dic[StringFromDisabilityData(&kDirectPlatform)] = _rootEnter;
        //: dic[@"message"] = _message;
        dic[StringFromDisabilityData(&appSplayUtility)] = _writingStand;
        //: return dic;
        return dic;
    //: } else {
    } else {
        //: return nil;
        return nil;
    }
}

//: + (instancetype)abstractWithMessage:(NIMMessage *)message {
+ (instancetype)streetSmartCompound:(NIMMessage *)message {
    //: if (!message) {
    if (!message) {
        //: return nil;
        return nil;
    }
    //: WriteBeneathPainter *ret = [[WriteBeneathPainter alloc] init];
    WriteBeneathPainter *ret = [[WriteBeneathPainter alloc] init];
    //: DelegateMountainAuthenticGatewayEnd *option = [[DelegateMountainAuthenticGatewayEnd alloc] init];
    DelegateMountainAuthenticGatewayEnd *option = [[DelegateMountainAuthenticGatewayEnd alloc] init];
    //: option.session = message.session;
    option.arrayImproved = message.session;
    //: option.message = message;
    option.attach = message;
    //: ReadySurfaceUnusual *info = [[ParseByBreakPerform sharedKit].provider infoByUser:message.from option:option];
    ReadySurfaceUnusual *info = [[ParseByBreakPerform unit].dress counterval:message.from mediaUtilizer:option];
    //: ret.sender = info.showName ?: @"null";
    ret.rootEnter = info.pressed ?: StringFromDisabilityData(&moduleEqualRantPreference);
    //: ret.message = [ret abstract:message];
    ret.writingStand = [ret jumpContent:message];
    //: return ret;
    return ret;
}

//: + (instancetype)abstractWithDictionary:(NSDictionary *)content {
+ (instancetype)dictionaryReceiver:(NSDictionary *)content {
    //: if (!content) {
    if (!content) {
        //: return nil;
        return nil;
    }
    //: WriteBeneathPainter *ret = [[WriteBeneathPainter alloc] init];
    WriteBeneathPainter *ret = [[WriteBeneathPainter alloc] init];
    //: ret.sender = [content jsonString:@"sender"];
    ret.rootEnter = [content middleCommand:StringFromDisabilityData(&kDirectPlatform)];
    //: ret.message = [content jsonString:@"message"];
    ret.writingStand = [content middleCommand:StringFromDisabilityData(&appSplayUtility)];
    //: return ret;
    return ret;
}

//: - (NSString *)abstract:(NIMMessage *)message {
- (NSString *)jumpContent:(NIMMessage *)message {
    //: NSString *msg = [AbsoluteFastParameterAccount messageContent:message];
    NSString *msg = [AbsoluteFastParameterAccount alongElementName:message];
    //: NSMutableString *ret = [NSMutableString string];
    NSMutableString *ret = [NSMutableString string];
    //: if (msg.length > (32)) {
    if (msg.length > (32)) {
        //: NSArray *tokens = [[FixDramaticSlipSlope currentParser] tokens:msg];
        NSArray *tokens = [[FixDramaticSlipSlope standard] that:msg];
        //: for (ParserInsightWarp *token in tokens) { 
        for (ParserInsightWarp *token in tokens) { //防止emoji表情被截断
            //: if (ret.length > (32)) {
            if (ret.length > (32)) {
                //: break;
                break;
            }
            //: [ret appendString:token.text];
            [ret appendString:token.grayCameraName];
        }
    //: } else {
    } else {
        //: [ret appendString:msg];
        [ret appendString:msg];
    }
    //: return ret;
    return ret;
}

//: @end
@end

Byte *DisabilityDataToByte(DisabilityData *data) {
    if (data->drawingPretend < 100) return data->gladSpecialist;
    for (int i = 0; i < data->inunction; i++) {
        data->gladSpecialist[i] ^= data->orientation;
    }
    data->gladSpecialist[data->inunction] = 0;
    data->drawingPretend = 63;
	if (data->inunction >= 2) {
		data->grape = data->gladSpecialist[0];
		data->disability = data->gladSpecialist[1];
	}
    return data->gladSpecialist;
}

NSString *StringFromDisabilityData(DisabilityData *data) {
    return [NSString stringWithUTF8String:(char *)DisabilityDataToByte(data)];
}
