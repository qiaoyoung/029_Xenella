
#import <Foundation/Foundation.h>

typedef struct {
    Byte worthIq;
    Byte *text;
    unsigned int oldenExpand;
	int endUser;
	int campus;
	int boy;
} StructSpotPendingData;

@interface SpotPendingData : NSObject

+ (instancetype)sharedInstance;

@end

@implementation SpotPendingData

//: session_snapchat_other_readed
- (NSString *)colorTransportTimer {
    /* static */ NSString *colorTransportTimer = nil;
    if (!colorTransportTimer) {
		NSString *origin = @"756375756F69685975686776656E67725969726E637459746367626362C8";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){6, (Byte *)data.bytes, 29, 52, 187, 228};
        colorTransportTimer = [self StringFromSpotPendingData:&value];
    }
    return colorTransportTimer;
}

//: type
- (NSString *)appPartUtility {
    /* static */ NSString *appPartUtility = nil;
    if (!appPartUtility) {
		NSString *origin = @"E1ECE5F04A";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){149, (Byte *)data.bytes, 4, 74, 50, 102};
        appPartUtility = [self StringFromSpotPendingData:&value];
    }
    return appPartUtility;
}

//: HEIC
- (NSString *)featureRaspPage {
    /* static */ NSString *featureRaspPage = nil;
    if (!featureRaspPage) {
		NSString *origin = @"7B767A705E";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){51, (Byte *)data.bytes, 4, 24, 205, 146};
        featureRaspPage = [self StringFromSpotPendingData:&value];
    }
    return featureRaspPage;
}

- (NSString *)StringFromSpotPendingData:(StructSpotPendingData *)data {
    return [NSString stringWithUTF8String:(char *)[self SpotPendingDataToByte:data]];
}

//: session_snapchat_self_unread
- (NSString *)colorCupPlatform {
    /* static */ NSString *colorCupPlatform = nil;
    if (!colorCupPlatform) {
		NSString *origin = @"FEE8FEFEE4E2E3D2FEE3ECFDEEE5ECF9D2FEE8E1EBD2F8E3FFE8ECE903";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){141, (Byte *)data.bytes, 28, 2, 120, 249};
        colorCupPlatform = [self StringFromSpotPendingData:&value];
    }
    return colorCupPlatform;
}

//: fired
- (NSString *)screenFordBareSagError {
    /* static */ NSString *screenFordBareSagError = nil;
    if (!screenFordBareSagError) {
		NSString *origin = @"89869D8A8B4F";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){239, (Byte *)data.bytes, 5, 105, 233, 15};
        screenFordBareSagError = [self StringFromSpotPendingData:&value];
    }
    return screenFordBareSagError;
}

//: jpg
- (NSString *)screenSurvivalPlatform {
    /* static */ NSString *screenSurvivalPlatform = nil;
    if (!screenSurvivalPlatform) {
		NSString *origin = @"DEC4D3E5";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){180, (Byte *)data.bytes, 3, 27, 212, 50};
        screenSurvivalPlatform = [self StringFromSpotPendingData:&value];
    }
    return screenSurvivalPlatform;
}

//: url
- (NSString *)k_iqData {
    /* static */ NSString *k_iqData = nil;
    if (!k_iqData) {
		NSString *origin = @"585F4183";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){45, (Byte *)data.bytes, 3, 173, 75, 107};
        k_iqData = [self StringFromSpotPendingData:&value];
    }
    return k_iqData;
}

//: session_snapchat_other_unread
- (NSString *)commonFordTitle {
    /* static */ NSString *commonFordTitle = nil;
    if (!commonFordTitle) {
		NSString *origin = @"D6C0D6D6CCCACBFAD6CBC4D5C6CDC4D1FACAD1CDC0D7FAD0CBD7C0C4C142";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){165, (Byte *)data.bytes, 29, 75, 45, 222};
        commonFordTitle = [self StringFromSpotPendingData:&value];
    }
    return commonFordTitle;
}

//: session_snapchat_self_readed
- (NSString *)themeAdminTitle {
    /* static */ NSString *themeAdminTitle = nil;
    if (!themeAdminTitle) {
		NSString *origin = @"CADCCACAD0D6D7E6CAD7D8C9DAD1D8CDE6CADCD5DFE6CBDCD8DDDCDDE6";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){185, (Byte *)data.bytes, 28, 254, 238, 66};
        themeAdminTitle = [self StringFromSpotPendingData:&value];
    }
    return themeAdminTitle;
}

//: md5
- (NSString *)moduleWindowHoppingTitle {
    /* static */ NSString *moduleWindowHoppingTitle = nil;
    if (!moduleWindowHoppingTitle) {
		NSString *origin = @"646D3CD3";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){9, (Byte *)data.bytes, 3, 41, 250, 130};
        moduleWindowHoppingTitle = [self StringFromSpotPendingData:&value];
    }
    return moduleWindowHoppingTitle;
}

//: data
- (NSString *)viewPendingId {
    /* static */ NSString *viewPendingId = nil;
    if (!viewPendingId) {
		NSString *origin = @"010411047D";
		NSData *data = [SpotPendingData SpotPendingDataToData:origin];
        StructSpotPendingData value = (StructSpotPendingData){101, (Byte *)data.bytes, 4, 238, 138, 152};
        viewPendingId = [self StringFromSpotPendingData:&value];
    }
    return viewPendingId;
}

+ (NSData *)SpotPendingDataToData:(NSString *)value {
    NSMutableArray<NSNumber *> *array = [NSMutableArray array];
    for (NSUInteger i = 0; i < value.length; i += 2) {
        NSString *hex = [value substringWithRange:NSMakeRange(i, 2)];
        NSScanner *scanner = [NSScanner scannerWithString:hex];
        unsigned int num;
        if ([scanner scanHexInt:&num]) {
            [array addObject:@(num)];
        }
    }

    NSInteger length = array.count;
    Byte *buffer = (Byte *)malloc(length + 1);
    for (int i = 0; i < length; i++) {
        buffer[i] = [array[i] intValue];
    }
    buffer[length] = 0;
    return [NSData dataWithBytesNoCopy:buffer length:length freeWhenDone:YES];
}

+ (instancetype)sharedInstance {
    static SpotPendingData *instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[self alloc] init];
    });
    return instance;
}

- (Byte *)SpotPendingDataToByte:(StructSpotPendingData *)data {
    for (int i = 0; i < data->oldenExpand; i++) {
        data->text[i] ^= data->worthIq;
    }
    data->text[data->oldenExpand] = 0;
	if (data->oldenExpand >= 3) {
		data->endUser = data->text[0];
		data->campus = data->text[1];
		data->boy = data->text[2];
	}
    return data->text;
}

@end

// __DEBUG__
// __CLOSE_PRINT__
//
//  SnapchatAttachment.m
//  NIM
//
//  Created by amao on 7/2/15.
//  Copyright (c) 2015 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "NearBuildStyle.h"
#import "NearBuildStyle.h"
//: #import "EnumAgainstWithout.h"
#import "EnumAgainstWithout.h"
//: #import "NSData+InGracefulConsolidateBehind.h"
#import "NSData+InGracefulConsolidateBehind.h"
//: #import "CreatorWarehouseQualityFormatter.h"
#import "CreatorWarehouseQualityFormatter.h"

//: @interface NearBuildStyle()
@interface NearBuildStyle()

//: @property (nonatomic,assign) BOOL isFromMe;
@property (nonatomic,assign) BOOL isFromMe;

//: @end
@end

//: @implementation NearBuildStyle
@implementation NearBuildStyle

//: #pragma mark - 实现文件上传需要接口
#pragma mark - 实现文件上传需要接口
//: - (BOOL)attachmentNeedsUpload
- (BOOL)attachmentNeedsUpload
{
    //: return [_url length] == 0;
    return [_url length] == 0;
}

//: - (void)setIsFired:(BOOL)isFired{
- (void)setIsFired:(BOOL)isFired{
    //: if (_isFired != isFired) {
    if (_isFired != isFired) {
        //: _isFired = isFired;
        _isFired = isFired;
        //: [self updateCover];
        [self m];
    }
}

//: #pragma mark - Private
#pragma mark - Private
//: - (void)updateCover{
- (void)m{
    //: UIImage *image;
    UIImage *image;
    //: if (!self.isFromMe) {
    if (!self.isFromMe) {
        //: if (self.isFired) {
        if (self.isFired) {
            //: image = [UIImage imageNamed:@"session_snapchat_other_readed"];
            image = [UIImage imageNamed:[[SpotPendingData sharedInstance] colorTransportTimer]];
        //: }else{
        }else{
            //: image = [UIImage imageNamed:@"session_snapchat_other_unread"];
            image = [UIImage imageNamed:[[SpotPendingData sharedInstance] commonFordTitle]];
        }
    //: }else{
    }else{
        //: if (self.isFired) {
        if (self.isFired) {
            //: image = [UIImage imageNamed:@"session_snapchat_self_readed"];
            image = [UIImage imageNamed:[[SpotPendingData sharedInstance] themeAdminTitle]];
        //: }else{
        }else{
            //: image = [UIImage imageNamed:@"session_snapchat_self_unread"];
            image = [UIImage imageNamed:[[SpotPendingData sharedInstance] colorCupPlatform]];
        }
    }
    //: self.showCoverImage = image;
    self.showCoverImage = image;
}


//: - (void)setImage:(UIImage *)image
- (void)setInstall:(UIImage *)image
{
    //: NSData *data = UIImageJPEGRepresentation(image, 0.3);
    NSData *data = UIImageJPEGRepresentation(image, 0.3);
    //: NSString *md5= [data MD5String];
    NSString *md5= [data device];
    //: self.md5 = md5;
    self.md5 = md5;

    //: [data writeToFile:[self filepath]
    [data writeToFile:[self ting]
           //: atomically:YES];
           atomically:YES];
}


//: #pragma NIMCustomAttachment
#pragma NIMCustomAttachment
//: - (NSString *)encodeAttachment
- (NSString *)encodeAttachment
{
    //: NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    //: NSMutableDictionary *data = [NSMutableDictionary dictionary];
    NSMutableDictionary *data = [NSMutableDictionary dictionary];
    //: [dict setObject:@(ConduitCancelSequenceTypeSnapchat) forKey:@"type"];
    [dict setObject:@(ConduitCancelSequenceTypeSnapchat) forKey:[[SpotPendingData sharedInstance] appPartUtility]];
    //: [data setObject:_md5?_md5:@"" forKey:@"md5"];
    [data setObject:_md5?_md5:@"" forKey:[[SpotPendingData sharedInstance] moduleWindowHoppingTitle]];
    //: [data setObject:@(_isFired) forKey:@"fired"];
    [data setObject:@(_isFired) forKey:[[SpotPendingData sharedInstance] screenFordBareSagError]];
    //: if ([_url length])
    if ([_url length])
    {
        //: [data setObject:_url forKey:@"url"];
        [data setObject:_url forKey:[[SpotPendingData sharedInstance] k_iqData]];
    }
    //: [dict setObject:data forKey:@"data"];
    [dict setObject:data forKey:[[SpotPendingData sharedInstance] viewPendingId]];

    //: NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict
                                                   //: options:0
                                                   options:0
                                                     //: error:nil];
                                                     error:nil];

    //: return [[NSString alloc] initWithData:jsonData
    return [[NSString alloc] initWithData:jsonData
                                 //: encoding:NSUTF8StringEncoding];
                                 encoding:NSUTF8StringEncoding];
}

//: - (void)setIsFromMe:(BOOL)isFromMe{
- (void)setIsFromMe:(BOOL)isFromMe{
    //: if (_isFromMe != isFromMe) {
    if (_isFromMe != isFromMe) {
        //: _isFromMe = isFromMe;
        _isFromMe = isFromMe;
        //: [self updateCover];
        [self m];
    }
}

//: - (UIEdgeInsets)contentViewInsets:(NIMMessage *)message
- (UIEdgeInsets)sight:(NIMMessage *)message
{
    //: CGFloat bubblePaddingForImage = 3.f;
    CGFloat bubblePaddingForImage = 3.f;
    //: CGFloat bubbleArrowWidthForImage = -4.f;
    CGFloat bubbleArrowWidthForImage = -4.f;
    //: if (message.isOutgoingMsg) {
    if (message.isOutgoingMsg) {
        //: return UIEdgeInsetsMake(bubblePaddingForImage,bubblePaddingForImage,bubblePaddingForImage,bubblePaddingForImage + bubbleArrowWidthForImage);
        return UIEdgeInsetsMake(bubblePaddingForImage,bubblePaddingForImage,bubblePaddingForImage,bubblePaddingForImage + bubbleArrowWidthForImage);
    //: } else {
    } else {
        //: return UIEdgeInsetsMake(bubblePaddingForImage,bubblePaddingForImage + bubbleArrowWidthForImage + 4, bubblePaddingForImage,bubblePaddingForImage);
        return UIEdgeInsetsMake(bubblePaddingForImage,bubblePaddingForImage + bubbleArrowWidthForImage + 4, bubblePaddingForImage,bubblePaddingForImage);
    }
}

//: - (BOOL)canBeRevoked
- (BOOL)substance
{
    //: return YES;
    return YES;
}

//: - (NSString *)attachmentPathForUploading
- (NSString *)attachmentPathForUploading
{
    //: return [self filepath];
    return [self ting];
}

//: - (BOOL)canBeForwarded
- (BOOL)permissionSame
{
    //: return NO;
    return NO;
}



//: #pragma mark - https
#pragma mark - https
//: - (NSString *)url
- (NSString *)url
{
    //: return [_url length] ?
    return [_url length] ?
    //: [[[NIMSDK sharedSDK] resourceManager] normalizeURLString:_url] : nil;
    [[[NIMSDK sharedSDK] resourceManager] normalizeURLString:_url] : nil;
}


//: - (void)updateAttachmentURL:(NSString *)urlString
- (void)updateAttachmentURL:(NSString *)urlString
{
    //: self.url = urlString;
    self.url = urlString;
}

//: - (CGSize)contentSize:(NIMMessage *)message cellWidth:(CGFloat)width{
- (CGSize)apply:(NIMMessage *)message anLayerWidth:(CGFloat)width{
    //: self.isFromMe = message.isOutgoingMsg;
    self.isFromMe = message.isOutgoingMsg;
    //: CGSize size = self.showCoverImage.size;
    CGSize size = self.showCoverImage.size;
    //: CGFloat customSnapMessageImageRightToText = 5;
    CGFloat customSnapMessageImageRightToText = 5;
    //: return CGSizeMake(size.width + customSnapMessageImageRightToText, size.height);
    return CGSizeMake(size.width + customSnapMessageImageRightToText, size.height);
}

//: - (NSString *)filepath
- (NSString *)ting
{
    //: NSString *filename = [_md5 stringByAppendingFormat:@".%@",(@"jpg")];
    NSString *filename = [_md5 stringByAppendingFormat:@".%@",([[SpotPendingData sharedInstance] screenSurvivalPlatform])];
    //: return [EnumAgainstWithout filepathForImage:filename];
    return [EnumAgainstWithout visualisation:filename];
}


//: - (UIImage *)showCoverImage
- (UIImage *)showCoverImage
{
    //: if (_showCoverImage == nil)
    if (_showCoverImage == nil)
    {
        //: [self updateCover];
        [self m];
    }
    //: return _showCoverImage;
    return _showCoverImage;
}

//: - (void)setImageFilePath:(NSString *)path
- (void)setBorder:(NSString *)path
{
    //: if ([[NSFileManager defaultManager] fileExistsAtPath:path]){
    if ([[NSFileManager defaultManager] fileExistsAtPath:path]){
        //: NSData *jpgData = nil;
        NSData *jpgData = nil;
        //: if ([path.pathExtension.uppercaseString isEqualToString:@"HEIC"]) {
        if ([path.pathExtension.uppercaseString isEqualToString:[[SpotPendingData sharedInstance] featureRaspPage]]) {
            //: CIImage *ciImage = [CIImage imageWithContentsOfURL:[NSURL fileURLWithPath:path]];
            CIImage *ciImage = [CIImage imageWithContentsOfURL:[NSURL fileURLWithPath:path]];
                                //: CIContext *context = [CIContext context];
                                CIContext *context = [CIContext context];
            //: jpgData = [context JPEGRepresentationOfImage:ciImage colorSpace:ciImage.colorSpace options:@{}];
            jpgData = [context JPEGRepresentationOfImage:ciImage colorSpace:ciImage.colorSpace options:@{}];
        //: } else {
        } else {
            //: jpgData = [NSData dataWithContentsOfFile:path];
            jpgData = [NSData dataWithContentsOfFile:path];
        }

        //: self.md5 = [jpgData MD5String];
        self.md5 = [jpgData device];

        //: [jpgData writeToFile:[self filepath]
        [jpgData writeToFile:[self ting]
               //: atomically:YES];
               atomically:YES];
     }
}

//: - (NSString *)cellContent:(NIMMessage *)message{
- (NSString *)present:(NIMMessage *)message{
    //: self.isFromMe = message.isOutgoingMsg;
    self.isFromMe = message.isOutgoingMsg;
    //: return @"MenuTruthTransformableShader";
    return @"MenuTruthTransformableShader";
}

//: @end
@end